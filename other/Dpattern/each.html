<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <script>
        //迭代器模式
        var each = function (ary, callback) {
            for (let i = 0; i < ary.length; i++) {
                const element = ary[i];
                if(callback(i, element) === false){
                    break;
                }
                //把下标和元素当作参数传递给callback函数
                callback.call(element, i, element)
            }
        }
        each([1, 2, '3'], function(i, n) {
            console.log(i, n, this);
        });

        var obj = {
            name: 'obj',
            each: each
        }

        obj.each([0, '1'], function(i, n){
            console.log(i, n, this);
        });

        // var compare = function(ary1, ary2){
        //     if(ary1.length !== ary2.length){
        //         throw new Error('ary1 and ary2 not equal')
        //     }
        //     each(ary1, function(i, n){
        //         if(n !== ary2[i]){
        //             throw new Error('ary1 and ary2 not equal')
        //         }
        //     });
        //     alert('ary1 and ary2 is equal');
        // }

        // compare([1,2], [1,3]);

        var Iterator = function(obj){
            var current = 0;
            var next = function(){
                current += 1;
            }
            var isDone = function(){
                return current >= obj.length;
            }
            var getCurrItem = function(){
                return obj[current];
            }
            return {
                next, 
                isDone,
                getCurrItem
            }
        }

        var compare = function (iterator1, iterator2) {
            while( !iterator1.isDone() && !iterator2.isDone()){
                if(iterator1.getCurrItem() !== iterator2.getCurrItem()){
                    throw new Error(' not Equal');
                }
                iterator1.next();
                iterator2.next();
            }
            alert('Is Equal');
        }
        var iterator1 = Iterator([1, 2, 3]);
        var iterator2 = Iterator([1, 2, 3]);

        compare(iterator1, iterator2);
    </script>
</head>

<body>

</body>

</html>